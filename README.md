mochaがイケてない

どの辺がイケてないか
・録画予約がjsonベタ書き(webインターフェース作ってない)
・時間通りにrtmpdumpとffmpegを呼び出すのが仕事の8割
・録画終了即エンコードしてる(見ない番組も処理されてる)
・古いファイルの削除がtmpwatch頼み
・"25:00"を"翌日1時"と認識する処理に不安がある
・音声のみの番組が多いのに、動画で観るしかない(音声のみモードが欲しい)

どうするか
・超A&Gに依存する部分と、動画配信機能として汎用に使える部分を分離する(microservice化？)
・ffmpegでrtmpを入力にできることがわかったので、rtmpdumpは使わない
・「指定した番組を録画してエンコード」ではなく、「全部録画しておいて観たいところをエンコード」する

するべきこと
・A&G公式番組表のHTMLをパースして、放送時間と番組名と演者を取得する
・A&G部と配信部の間のインターフェースを考える(ファイル名？DB？RESTAPI？)

